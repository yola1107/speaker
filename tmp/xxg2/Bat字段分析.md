# Bat å­—æ®µåˆ†ææŠ¥å‘Š

## ğŸ” Bat çš„ä½¿ç”¨æƒ…å†µ

### å½“å‰ä»£ç ä¸­çš„ä½¿ç”¨

#### xxgï¼ˆåŸå§‹é¡¹ç›®ï¼‰
```go
// 1. ä» Redis åŠ è½½é¢„è®¾æ•°æ®æ—¶ï¼ŒBat è‡ªåŠ¨åŠ è½½
func (s *betOrderService) initStepMap() bool {
    var stepMaps []*stepMap
    json.CJSON.Unmarshal([]byte(s.preset.Maps), &stepMaps)
    s.stepMap = stepMaps[lastMapID]  // Bat åœ¨è¿™é‡Œè¢«åŠ è½½
    return true
}

// 2. åªåœ¨è¿”å›ç»“æœæ—¶ä½¿ç”¨
func (s *betOrderService) getBetResultMap() map[string]any {
    return map[string]any{
        "bat": s.stepMap.Bat,  // â† å”¯ä¸€ä½¿ç”¨çš„åœ°æ–¹
        // ... å…¶ä»–å­—æ®µ
    }
}

// 3. åœ¨æ¸¸æˆé€»è¾‘ä¸­å®Œå…¨æœªä½¿ç”¨
// âŒ loadStepData() - ä¸ä½¿ç”¨ Bat
// âŒ findWinInfos() - ä¸ä½¿ç”¨ Bat
// âŒ processWinInfos() - ä¸ä½¿ç”¨ Bat
```

#### xxg2ï¼ˆé‡æ„é¡¹ç›®ï¼‰
```go
// 1. åˆå§‹åŒ–æ—¶è®¾ç½®ä¸ºç©ºæ•°ç»„
func (s *betOrderService) initSpinSymbol() {
    s.stepMap = &stepMap{
        Bat: nil,  // â† å§‹ç»ˆä¸ºç©º
        Map: symbols,
    }
}

// 2. åªåœ¨è¿”å›ç»“æœæ—¶ä½¿ç”¨
func (s *betOrderService) betOrder() {
    return map[string]any{
        "bat": s.stepMap.Bat,  // â† å”¯ä¸€ä½¿ç”¨çš„åœ°æ–¹ï¼ˆä½†å§‹ç»ˆä¸ºç©ºï¼‰
        // ... å…¶ä»–å­—æ®µ
    }
}

// 3. åœ¨æ¸¸æˆé€»è¾‘ä¸­å®Œå…¨æœªä½¿ç”¨
```

---

## ğŸ’¡ Bat çš„çœŸå®ä½œç”¨

### Bat ç»“æ„å®šä¹‰

```go
type Bat struct {
    X      int64 `json:"x"`      // åŸå§‹ä½ç½® Xï¼ˆè¡Œï¼‰
    Y      int64 `json:"y"`      // åŸå§‹ä½ç½® Yï¼ˆåˆ—ï¼‰
    TransX int64 `json:"nx"`     // å˜æ¢åä½ç½® X
    TransY int64 `json:"ny"`     // å˜æ¢åä½ç½® Y
    Syb    int64 `json:"syb"`    // åŸå§‹ç¬¦å·ï¼ˆå¦‚ 8ï¼‰
    Sybn   int64 `json:"sybn"`   // å˜æ¢åç¬¦å·ï¼ˆå¦‚ 10-ç™¾æ­ï¼‰
}
```

### ä»æ•°å€¼ç­–åˆ’çš„è¾“å‡ºçœ‹ Bat

```
ã€å˜æ¢åç¬¦å·å›¾æ¡ˆ-8/10(+1ä¸ª)ã€‘
  9| 11|  1|  3|10*   â† ä½ç½® [0,4]: åŸç¬¦å·8 â†’ å˜æ¢å10
  3|  9|  2|  7|  9
  4|  7|  3|  8| 11
  5|  3|10*|  9|  2   â† ä½ç½® [3,2]: åŸç¬¦å·8 â†’ å˜æ¢å10
```

å¯¹åº”çš„ Bat æ•°æ®ï¼š
```json
[
    {
        "x": 0,    // ç¬¬1è¡Œ
        "y": 4,    // ç¬¬5åˆ—
        "nx": 0,   // å˜æ¢åè¿˜æ˜¯ç¬¬1è¡Œ
        "ny": 4,   // å˜æ¢åè¿˜æ˜¯ç¬¬5åˆ—
        "syb": 8,  // åŸå§‹ç¬¦å·ï¼šé’å¹´å¥³äºº
        "sybn": 10 // å˜æ¢åï¼šç™¾æ­
    },
    {
        "x": 3,    // ç¬¬4è¡Œ
        "y": 2,    // ç¬¬3åˆ—
        "nx": 3,
        "ny": 2,
        "syb": 8,
        "sybn": 10
    }
]
```

---

## ğŸ¯ Bat çš„å®é™…ç”¨é€”

### âœ… ç”¨é€”1ï¼šå‰ç«¯åŠ¨ç”»å±•ç¤º

**å‰ç«¯å¯ä»¥ä½¿ç”¨ Bat æ•°æ®å±•ç¤ºå˜æ¢åŠ¨ç”»**ï¼š

```javascript
// å‰ç«¯ä»£ç ç¤ºä¾‹
bat.forEach(transform => {
    // æ’­æ”¾ç¬¦å·å˜æ¢åŠ¨ç”»
    showTransformAnimation(
        position: [transform.x, transform.y],
        from: transform.syb,    // ä»ç¬¦å·8
        to: transform.sybn,      // å˜æˆç¬¦å·10ï¼ˆç™¾æ­ï¼‰
        effect: "sparkle"        // é—ªå…‰æ•ˆæœ
    );
});
```

### âŒ ç”¨é€”2ï¼šåç«¯æ¸¸æˆé€»è¾‘

**Bat ä¸å‚ä¸æ¸¸æˆé€»è¾‘è®¡ç®—ï¼**

**åŸå› **ï¼š
1. **å˜æ¢å·²åœ¨æ•°å€¼ç­–åˆ’ç³»ç»Ÿä¸­å®Œæˆ**
   - æ•°å€¼ç­–åˆ’ç³»ç»Ÿç”Ÿæˆè½¬è½®æ•°æ®
   - åº”ç”¨ Bat å˜æ¢ï¼ˆ8â†’10ï¼‰
   - å°†å˜æ¢åçš„ç»“æœå­˜å‚¨åˆ° `stepMap.Map`
   - å°†å˜æ¢ä¿¡æ¯è®°å½•åˆ° `stepMap.Bat`

2. **æ¸¸æˆæœåŠ¡å™¨ç›´æ¥ä½¿ç”¨å˜æ¢åçš„æ•°æ®**
   - ä» Redis åŠ è½½ `stepMap.Map`ï¼ˆå·²ç»æ˜¯å˜æ¢åçš„ç¬¦å·ï¼‰
   - ä¸éœ€è¦å†æ¬¡åº”ç”¨ Bat å˜æ¢
   - Bat åªæ˜¯é™„åŠ ä¿¡æ¯ï¼Œä¾›å‰ç«¯ä½¿ç”¨

---

## ğŸ“Š æ•°æ®æµåˆ†æ

### xxg çš„æ•°æ®æµ

```
ã€æ•°å€¼ç­–åˆ’ç³»ç»Ÿã€‘
  â†“
1. ç”Ÿæˆè½¬è½®æ•°æ®ï¼ˆæ¯è½®120ä¸ªç¬¦å·ï¼‰
  â†“
2. åº”ç”¨ Bat å˜æ¢è§„åˆ™
   ç¬¦å·8ï¼ˆé’å¹´å¥³äººï¼‰â†’ ç¬¦å·10ï¼ˆç™¾æ­ï¼‰
   æ¦‚ç‡ï¼š10%
  â†“
3. ç”Ÿæˆå®Œæ•´çš„ stepMap
   â”œâ”€ Map: [å˜æ¢åçš„ç¬¦å·æ•°æ®]  â† ç¬¦å·8å·²ç»å˜æˆ10
   â””â”€ Bat: [å˜æ¢è®°å½•]          â† è®°å½•å“ªäº›ä½ç½®å‘ç”Ÿäº†å˜æ¢
  â†“
4. å­˜å‚¨åˆ° Redis
  â†“
ã€xxg æ¸¸æˆæœåŠ¡å™¨ã€‘
  â†“
5. ä» Redis åŠ è½½ stepMap
   â”œâ”€ Map: ç›´æ¥ä½¿ç”¨ï¼ˆå·²ç»æ˜¯å˜æ¢åçš„ï¼‰
   â””â”€ Bat: ä¸å¤„ç†ï¼Œåªè¿”å›ç»™å‰ç«¯
  â†“
6. ä½¿ç”¨ stepMap.Map è¿›è¡Œä¸­å¥–åˆ¤æ–­
   â† è¿™é‡Œçœ‹åˆ°çš„ç¬¦å·10å°±æ˜¯å˜æ¢åçš„ç™¾æ­
  â†“
7. è¿”å›ç»“æœ
   â”œâ”€ symbolGrid: ç¬¦å·ç½‘æ ¼
   â”œâ”€ winResults: ä¸­å¥–ä¿¡æ¯
   â””â”€ bat: Bat æ•°æ®ï¼ˆä¾›å‰ç«¯åŠ¨ç”»ï¼‰
  â†“
ã€å‰ç«¯ã€‘
  â†“
8. æ ¹æ® Bat æ•°æ®æ’­æ”¾å˜æ¢åŠ¨ç”»
   "å“‡ï¼ç¬¦å·8å˜æˆäº†ç™¾æ­ï¼"
```

### xxg2 çš„æ•°æ®æµ

```
ã€xxg2 æ¸¸æˆæœåŠ¡å™¨ã€‘
  â†“
1. ä»é…ç½®åŠ è½½ RealData
  â†“
2. éšæœºç”Ÿæˆç¬¦å·ç½‘æ ¼
   â”œâ”€ Map: ç›´æ¥ä» RealData ç”Ÿæˆ
   â””â”€ Bat: è®¾ç½®ä¸º nilï¼ˆæ²¡æœ‰å˜æ¢ä¿¡æ¯ï¼‰
  â†“
3. ä½¿ç”¨ Map è¿›è¡Œä¸­å¥–åˆ¤æ–­
  â†“
4. è¿”å›ç»“æœ
   â”œâ”€ symbolGrid: ç¬¦å·ç½‘æ ¼
   â”œâ”€ winResults: ä¸­å¥–ä¿¡æ¯
   â””â”€ bat: nullï¼ˆæ— å˜æ¢åŠ¨ç”»ï¼‰
```

---

## ğŸ” Bat åœ¨ä»£ç ä¸­çš„ä½ç½®

### 1. å®šä¹‰
```go
// types.go
type Bat struct {
    X      int64 `json:"x"`
    Y      int64 `json:"y"`
    TransX int64 `json:"nx"`
    TransY int64 `json:"ny"`
    Syb    int64 `json:"syb"`
    Sybn   int64 `json:"sybn"`
}

type stepMap struct {
    // ... å…¶ä»–å­—æ®µ
    Bat []*Bat `json:"bat"`  // â† å®šä¹‰
    // ... å…¶ä»–å­—æ®µ
}
```

### 2. èµ‹å€¼

**xxg**ï¼š
```go
// ä» Redis åŠ è½½ï¼Œè‡ªåŠ¨å¡«å……
s.stepMap = stepMaps[lastMapID]  // Bat ä»æ•°æ®åº“ä¸­æ¥
```

**xxg2**ï¼š
```go
// æ‰‹åŠ¨è®¾ç½®ä¸ºç©º
s.stepMap = &stepMap{
    Bat: nil,  // â† å§‹ç»ˆä¸ºç©º
}
```

### 3. ä½¿ç”¨

**xxg å’Œ xxg2 éƒ½ä¸€æ ·**ï¼š
```go
// åªåœ¨è¿”å›ç»“æœæ—¶ä½¿ç”¨
return map[string]any{
    "bat": s.stepMap.Bat,  // â† å”¯ä¸€ä½¿ç”¨
}
```

### 4. åœ¨æ¸¸æˆé€»è¾‘ä¸­

**å®Œå…¨æœªä½¿ç”¨**ï¼š
```go
// âŒ loadStepData() - åªä½¿ç”¨ stepMap.Map
// âŒ findWinInfos() - ä¸ä½¿ç”¨ Bat
// âŒ processWinInfos() - ä¸ä½¿ç”¨ Bat
// âŒ updateBaseStepResult() - ä¸ä½¿ç”¨ Bat
// âŒ updateFreeStepResult() - ä¸ä½¿ç”¨ Bat
```

---

## â“ ä¸ºä»€ä¹ˆä¸åœ¨æ¸¸æˆé€»è¾‘ä¸­ä½¿ç”¨ Batï¼Ÿ

### åŸå› åˆ†æ

1. **å˜æ¢å·²åœ¨ç”Ÿæˆæ—¶å®Œæˆ**
   ```
   æ•°å€¼ç­–åˆ’ç³»ç»Ÿç”Ÿæˆæ•°æ®æ—¶ï¼š
   ç¬¦å·8 â†’ ç™¾æ­10ï¼ˆå˜æ¢å®Œæˆï¼‰
   å­˜å‚¨ç»“æœï¼šMap = [..., 10, ...]ï¼ˆå·²ç»æ˜¯ç™¾æ­ï¼‰
   è®°å½•ä¿¡æ¯ï¼šBat = [{..., syb:8, sybn:10}]
   
   æ¸¸æˆæœåŠ¡å™¨ä½¿ç”¨æ—¶ï¼š
   åŠ è½½ Mapï¼šç›´æ¥çœ‹åˆ°ç¬¦å·10ï¼ˆç™¾æ­ï¼‰
   ä¸éœ€è¦å†å˜æ¢ï¼
   ```

2. **Bat åªæ˜¯é™„åŠ ä¿¡æ¯**
   - ä¸»æ•°æ®ï¼š`stepMap.Map`ï¼ˆå˜æ¢åçš„ç¬¦å·ï¼‰
   - é™„åŠ ä¿¡æ¯ï¼š`stepMap.Bat`ï¼ˆå˜æ¢è®°å½•ï¼‰
   - æ¸¸æˆé€»è¾‘åªéœ€è¦ä¸»æ•°æ®

3. **å‰ç«¯éœ€è¦åŠ¨ç”»**
   - å‰ç«¯æƒ³çŸ¥é“"å“ªäº›ç¬¦å·å˜æ¢äº†"
   - æ’­æ”¾å˜æ¢åŠ¨ç”»æ•ˆæœ
   - æå‡æ¸¸æˆä½“éªŒ

---

## ğŸ’¡ åº”è¯¥åˆ é™¤ Bat å—ï¼Ÿ

### âŒ ä¸å»ºè®®åˆ é™¤

è™½ç„¶ Bat åœ¨æ¸¸æˆé€»è¾‘ä¸­æœªä½¿ç”¨ï¼Œä½†æ˜¯ï¼š

1. **å‰ç«¯å¯èƒ½éœ€è¦**
   - ç”¨äºæ’­æ”¾ç¬¦å·å˜æ¢åŠ¨ç”»
   - æå‡ç”¨æˆ·ä½“éªŒ
   - æ˜¾ç¤ºç‰¹æ•ˆ

2. **ä¿æŒæ¥å£å…¼å®¹**
   - ä¸ xxg çš„è¿”å›æ ¼å¼ä¸€è‡´
   - å‰ç«¯ä»£ç ä¸éœ€è¦ä¿®æ”¹
   - API æ¥å£ä¸å˜

3. **æœªæ¥æ‰©å±•**
   - å¯èƒ½éœ€è¦æ·»åŠ  Bat å˜æ¢é€»è¾‘
   - å¯èƒ½éœ€è¦è‡ªå·±ç”Ÿæˆ Bat æ•°æ®
   - ä¿ç•™å­—æ®µä¾¿äºæ‰©å±•

### âœ… å»ºè®®ä¿ç•™ä½†è¯´æ˜

```go
type stepMap struct {
    // ... å…¶ä»–å­—æ®µ
    Bat []*Bat `json:"bat"`  // ç¬¦å·å˜æ¢è®°å½•ï¼ˆä¾›å‰ç«¯åŠ¨ç”»ä½¿ç”¨ï¼Œä¸å‚ä¸æ¸¸æˆé€»è¾‘ï¼‰
}
```

---

## ğŸ¯ ç»“è®º

### Bat çš„çœŸç›¸

| æ–¹é¢ | è¯´æ˜ |
|------|------|
| **å®šä¹‰ä½ç½®** | `types.go` çš„ Bat ç»“æ„ä½“ |
| **å­˜å‚¨ä½ç½®** | `stepMap.Bat` å­—æ®µ |
| **ç”Ÿæˆä½ç½®** | æ•°å€¼ç­–åˆ’çš„é¢„è®¾æ•°æ®ç”Ÿæˆç³»ç»Ÿ |
| **åç«¯ä½¿ç”¨** | âŒ ä¸å‚ä¸æ¸¸æˆé€»è¾‘ |
| **å‰ç«¯ä½¿ç”¨** | âœ… ç”¨äºæ’­æ”¾å˜æ¢åŠ¨ç”» |
| **æ¸¸æˆå½±å“** | âŒ æ— å½±å“ï¼ˆå˜æ¢å·²åœ¨ Map ä¸­ï¼‰ |

### ä¸ºä»€ä¹ˆæ¸¸æˆé€»è¾‘ä¸ä½¿ç”¨ Batï¼Ÿ

**å› ä¸º `stepMap.Map` ä¸­çš„æ•°æ®å·²ç»æ˜¯å˜æ¢åçš„ç»“æœï¼**

```
ä¾‹å¦‚ï¼š
åŸå§‹ç¬¦å·ï¼š[8, 8, 8, 3, 9]
Bat å˜æ¢ï¼šä½ç½®[0,0]çš„ç¬¦å·8 â†’ ç™¾æ­10
æœ€ç»ˆå­˜å‚¨ï¼šMap = [10, 8, 8, 3, 9]  â† å·²ç»æ˜¯10äº†ï¼
         Bat = [{x:0, y:0, syb:8, sybn:10}]  â† åªæ˜¯è®°å½•

æ¸¸æˆé€»è¾‘ï¼š
ç›´æ¥ä½¿ç”¨ Map[0] = 10ï¼ˆç™¾æ­ï¼‰
ä¸éœ€è¦æŸ¥çœ‹ Batï¼
```

### xxg2 çš„ Bat çŠ¶æ€

| é¡¹ç›® | å€¼ | è¯´æ˜ |
|------|-----|------|
| **xxg** | ä» Redis åŠ è½½ | æ•°å€¼ç­–åˆ’ç³»ç»Ÿç”Ÿæˆ |
| **xxg2** | `nil` æˆ– `[]` | æ²¡æœ‰ Bat å˜æ¢æ•°æ® |
| **å½±å“** | âŒ æ—  | ä¸å½±å“æ¸¸æˆé€»è¾‘ |
| **å‰ç«¯** | âš ï¸ æ— åŠ¨ç”» | å‰ç«¯çœ‹ä¸åˆ°å˜æ¢æ•ˆæœ |

---

## ğŸ® å®é™…ç¤ºä¾‹

### æ•°å€¼ç­–åˆ’çš„è¾“å‡º

```
ã€åˆå§‹ç¬¦å·å›¾æ¡ˆã€‘
  9| 11|  1|  3|  8   â† åŸå§‹ç¬¦å·
  3|  9|  2|  7|  9
  4|  7|  3|  8| 11
  5|  3|  9|  9|  2

ã€å˜æ¢åç¬¦å·å›¾æ¡ˆ-8/10(+1ä¸ª)ã€‘
  9| 11|  1|  3|10*   â† ç¬¦å·8å˜æˆç™¾æ­10
  3|  9|  2|  7|  9
  4|  7|  3|  8| 11
  5|  3|10*|  9|  2   â† ç¬¦å·8å˜æˆç™¾æ­10

å¯¹åº”çš„æ•°æ®ï¼š
stepMap.Map = [9,3,4,5, 11,9,7,3, 1,2,3,10, 3,7,8,9, 10,9,11,2]
                                      â†‘                â†‘
                                   ä½ç½®[3,2]        ä½ç½®[0,4]
                                   å·²ç»æ˜¯10äº†ï¼     å·²ç»æ˜¯10äº†ï¼

stepMap.Bat = [
    {x:0, y:4, syb:8, sybn:10},  // è®°å½•ï¼šä½ç½®[0,4]ä»8å˜æˆ10
    {x:3, y:2, syb:8, sybn:10}   // è®°å½•ï¼šä½ç½®[3,2]ä»8å˜æˆ10
]
```

### æ¸¸æˆæœåŠ¡å™¨å¦‚ä½•ä½¿ç”¨

```go
// 1. åŠ è½½æ•°æ®
s.stepMap.Map = [9,3,4,5, 11,9,7,3, 1,2,3,10, 3,7,8,9, 10,9,11,2]
s.stepMap.Bat = [{...}, {...}]

// 2. è½¬æ¢ä¸ºç¬¦å·ç½‘æ ¼
s.symbolGrid[0][4] = s.stepMap.Map[0*5+4] = 10  // â† ç›´æ¥æ˜¯ç™¾æ­
s.symbolGrid[3][2] = s.stepMap.Map[3*5+2] = 10  // â† ç›´æ¥æ˜¯ç™¾æ­

// 3. ä¸­å¥–åˆ¤æ–­ï¼ˆBat ä¸å‚ä¸ï¼‰
findWinInfos() {
    // çœ‹åˆ° symbolGrid[0][4] = 10ï¼ˆç™¾æ­ï¼‰
    // ä¸éœ€è¦çŸ¥é“å®ƒåŸæ¥æ˜¯ç¬¦å·8
    // ç›´æ¥å½“ç™¾æ­å¤„ç†
}

// 4. è¿”å›ç»“æœ
return {
    "symbolGrid": symbolGrid,  // [9,11,1,3,10, ...]
    "bat": stepMap.Bat,        // å‰ç«¯ç”¨äºæ’­æ”¾åŠ¨ç”»
}
```

---

## ğŸ¨ å‰ç«¯å¦‚ä½•ä½¿ç”¨ Bat

### å‰ç«¯åŠ¨ç”»æµç¨‹

```javascript
// 1. æ”¶åˆ°æ¸¸æˆç»“æœ
const result = {
    symbolGrid: [9,11,1,3,10, 3,9,2,7,9, ...],
    bat: [
        {x:0, y:4, syb:8, sybn:10},
        {x:3, y:2, syb:8, sybn:10}
    ],
    // ... å…¶ä»–æ•°æ®
};

// 2. å…ˆæ˜¾ç¤ºåŸå§‹ç¬¦å·
showSymbols([9,11,1,3,8, 3,9,2,7,9, ...]);  // ç¬¦å·8è¿˜æ²¡å˜

// 3. æ’­æ”¾ Bat å˜æ¢åŠ¨ç”»
result.bat.forEach(bat => {
    // ä½ç½® [0,4]ï¼šç¬¦å·8 é—ªå…‰ â†’ å˜æˆç™¾æ­10
    playTransformAnimation(bat.x, bat.y, bat.syb, bat.sybn);
});

// 4. å˜æ¢å®Œæˆåæ˜¾ç¤ºæœ€ç»ˆç¬¦å·
showSymbols(result.symbolGrid);  // ç°åœ¨æ˜¯ç™¾æ­10äº†

// 5. æ˜¾ç¤ºä¸­å¥–çº¿
showWinLines(result.winResults);
```

**æ•ˆæœ**ï¼š
- ç©å®¶çœ‹åˆ°ç¬¦å·8çªç„¶é—ªå…‰
- å˜æˆé‡‘è‰²çš„ç™¾æ­ç¬¦å·
- ç„¶åè§¦å‘å¤§å¥–
- ä½“éªŒæ›´åˆºæ¿€ï¼ğŸ‰

---

## ğŸ” ä¸ºä»€ä¹ˆ xxg2 çš„ Bat æ˜¯ç©ºçš„ï¼Ÿ

### xxg çš„ Bat æ¥æº

```
æ•°å€¼ç­–åˆ’ç³»ç»Ÿï¼ˆç‹¬ç«‹ï¼‰
  â†“
ç”Ÿæˆè½¬è½® + åº”ç”¨ Bat å˜æ¢
  â†“
ç”Ÿæˆ stepMapï¼ˆåŒ…å« Bat æ•°æ®ï¼‰
  â†“
å­˜å‚¨åˆ° Redis
  â†“
xxg åŠ è½½ä½¿ç”¨ âœ…
```

### xxg2 çš„ Bat æ¥æº

```
xxg2 é…ç½®ï¼ˆRealDataï¼‰
  â†“
æ²¡æœ‰ Bat å˜æ¢æ•°æ®ï¼âŒ
  â†“
æ‰‹åŠ¨è®¾ç½® Bat = nil
  â†“
å‰ç«¯æ”¶åˆ° bat: null
  â†“
æ— å˜æ¢åŠ¨ç”» âš ï¸
```

---

## ğŸ’¡ å¦‚ä½•ä¸º xxg2 æ·»åŠ  Bat æ•°æ®ï¼Ÿ

### æ–¹æ¡ˆ1ï¼šä»æ•°å€¼ç­–åˆ’è·å–ï¼ˆæ¨èï¼‰

å‘æ•°å€¼ç­–åˆ’ç´¢å–ï¼š
1. **å®Œæ•´çš„é¢„è®¾æ•°æ®**ï¼ˆåŒ…å« Batï¼‰
2. **è½¬æ¢ä¸º RealData æ ¼å¼**
3. **ä¿ç•™ Bat ä¿¡æ¯**

### æ–¹æ¡ˆ2ï¼šè‡ªå·±å®ç° Bat å˜æ¢é€»è¾‘

åœ¨ `initSpinSymbol()` ä¸­æ·»åŠ ï¼š

```go
func (s *betOrderService) initSpinSymbol() [20]int64 {
    // 1. ç”ŸæˆåŸå§‹ç¬¦å·
    var symbols [20]int64
    // ... ç°æœ‰é€»è¾‘ç”Ÿæˆç¬¦å·
    
    // 2. åº”ç”¨ Bat å˜æ¢
    var bats []*Bat
    for i, symbol := range symbols {
        // ç¬¦å·8æœ‰10%æ¦‚ç‡å˜æˆç™¾æ­10
        if symbol == 8 && rand.IntN(100) < 10 {
            row := i / 5
            col := i % 5
            
            bats = append(bats, &Bat{
                X:      int64(row),
                Y:      int64(col),
                TransX: int64(row),
                TransY: int64(col),
                Syb:    8,
                Sybn:   10,
            })
            
            symbols[i] = 10  // å˜æ¢æˆç™¾æ­
        }
    }
    
    // 3. ä¿å­˜ Bat æ•°æ®
    s.stepMap.Bat = bats
    
    return symbols
}
```

**é—®é¢˜**ï¼š
- éœ€è¦çŸ¥é“å˜æ¢è§„åˆ™ï¼ˆå“ªäº›ç¬¦å·ã€æ¦‚ç‡å¤šå°‘ï¼‰
- å¯èƒ½å½±å“ RTPï¼ˆéœ€è¦é‡æ–°æµ‹è¯•ï¼‰
- å¢åŠ å¤æ‚åº¦

### æ–¹æ¡ˆ3ï¼šä¿æŒç°çŠ¶ï¼ˆæ¨èï¼‰

```go
// ä¿æŒ Bat = nil
// ä¸å½±å“æ¸¸æˆé€»è¾‘
// å‰ç«¯ä¸æ˜¾ç¤ºå˜æ¢åŠ¨ç”»ï¼ˆæˆ–ä½¿ç”¨é»˜è®¤åŠ¨ç”»ï¼‰
```

**ä¼˜ç‚¹**ï¼š
- ç®€å•æ˜äº†
- ä¸å½±å“åŠŸèƒ½
- æ¸¸æˆé€»è¾‘æ­£ç¡®

---

## ğŸ¯ æ€»ç»“

### Bat å­—æ®µçš„çœŸç›¸

| é—®é¢˜ | ç­”æ¡ˆ |
|------|------|
| **Bat ç”¨äºä»€ä¹ˆï¼Ÿ** | å‰ç«¯åŠ¨ç”»å±•ç¤ºï¼Œä¸å‚ä¸æ¸¸æˆé€»è¾‘ |
| **ä¸ºä»€ä¹ˆæœªä½¿ç”¨ï¼Ÿ** | å˜æ¢å·²åœ¨æ•°å€¼ç­–åˆ’ç³»ç»Ÿå®Œæˆï¼ŒMap ä¸­å·²æ˜¯å˜æ¢åæ•°æ® |
| **xxg2 ä¸ºä»€ä¹ˆæ˜¯ç©ºï¼Ÿ** | ä½¿ç”¨ RealData ç›´æ¥ç”Ÿæˆï¼Œæ²¡æœ‰ Bat å˜æ¢ä¿¡æ¯ |
| **éœ€è¦å®ç°å—ï¼Ÿ** | âŒ ä¸éœ€è¦ï¼ˆä¸å½±å“æ¸¸æˆé€»è¾‘å’Œ RTPï¼‰ |
| **å‰ç«¯å½±å“ï¼Ÿ** | âš ï¸ æ— å˜æ¢åŠ¨ç”»ï¼ˆå¯ä»¥æ¥å—ï¼‰ |
| **åº”è¯¥åˆ é™¤å—ï¼Ÿ** | âŒ ä¿ç•™ï¼ˆæ¥å£å…¼å®¹ï¼Œæœªæ¥æ‰©å±•ï¼‰ |

### å»ºè®®

âœ… **ä¿ç•™ Bat å­—æ®µ**ï¼š
- ä¸å½±å“æ€§èƒ½ï¼ˆåªæ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼‰
- ä¿æŒæ¥å£å…¼å®¹
- ä¾¿äºæœªæ¥æ‰©å±•

âœ… **æ·»åŠ æ³¨é‡Šè¯´æ˜**ï¼š
```go
Bat []*Bat `json:"bat"`  // ç¬¦å·å˜æ¢è®°å½•ï¼ˆä¾›å‰ç«¯åŠ¨ç”»ï¼Œä¸å‚ä¸æ¸¸æˆé€»è¾‘ï¼Œxxg2ä¸­å§‹ç»ˆä¸ºç©ºï¼‰
```

âœ… **æ–‡æ¡£ä¸­è¯´æ˜**ï¼š
- Bat æ˜¯å‰ç«¯ä¸“ç”¨å­—æ®µ
- ä¸å½±å“ RTP è®¡ç®—
- xxg2 ä¸­ä¸ºç©ºæ˜¯æ­£å¸¸çš„

---

*Bat å­—æ®µåˆ†æå®Œæˆæ—¶é—´ï¼š2025-10-29 12:15*

