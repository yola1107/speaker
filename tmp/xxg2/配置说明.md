# xxg2 配置说明

## 配置文件结构

### configs_json.go
包含游戏配置的JSON原始数据

### configs.go
包含配置结构定义和解析函数

---

## 配置结构说明

### gameConfigJson - 游戏配置主结构

```go
type gameConfigJson struct {
    PayTable                [][]int64   // 赔付表（符号倍率表）
    BetSizeSlice            []float64   // 下注基础金额
    BetLevelSlice           []int64     // 下注倍数
    BaseBat                 int64       // 基础倍数
    FreeGameTriggerScatter  int64       // 触发免费游戏的scatter数量
    FreeGameInitTimes       int64       // 免费游戏初始次数
    ExtraScatterExtraTime   int64       // 额外scatter增加的次数
    RollCfg                 rollCfg     // 滚轴配置
    RealData                [][][]int64 // 真实数据（预设滚轴数据）
}
```

### rollCfg - 滚轴配置集合

```go
type rollCfg struct {
    Base rollConfig // 基础游戏配置
    Free rollConfig // 免费游戏配置
}
```

### rollConfig - 单个滚轴配置

```go
type rollConfig struct {
    UseKey []int64 // 使用的key数组
    Weight []int64 // 权重数组
}
```

---

## 配置项详解

### 1. PayTable（赔付表）
```json
"pay_table": [
    [2, 3, 5],      // 符号1（J）的倍率：3个=2倍，4个=3倍，5个=5倍
    [2, 3, 5],      // 符号2（Q）
    [2, 3, 5],      // 符号3（K）
    [2, 3, 5],      // 符号4（A）
    [4, 7, 10],     // 符号5（十字架）
    [6, 10, 15],    // 符号6（酒杯）
    [12, 15, 25],   // 符号7（小孩）
    [15, 20, 15],   // 符号8（青年女人）
    [18, 25, 40],   // 符号9（老头）
    [20, 30, 50]    // 符号10（百搭）
]
```

**说明**：
- 每行代表一个符号的赔率表
- 数组索引对应中奖符号数量-3（即[0]对应3个，[1]对应4个，[2]对应5个）
- 最小中奖数量为3个

### 2. BetSizeSlice（下注基础金额）
```json
"bet_size": [0.02, 0.1, 0.05, 2.5]
```

**说明**：可选的下注基础金额列表

### 3. BetLevelSlice（下注倍数）
```json
"bet_level": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
```

**说明**：
- 可选的下注倍数
- 最终下注金额 = bet_size × bet_level

### 4. BaseBat（基础倍数）
```json
"base_bat": 20
```

**说明**：虚拟中奖线倍数（与const.go中的_baseMultiplier相同）

### 5. FreeGameTriggerScatter（触发免费的scatter数量）
```json
"free_game_trigger_scatter": 3
```

**说明**：
- 需要出现的夺宝符号（scatter）数量才能触发免费游戏
- 对应const.go中的_triggerTreasureCount

### 6. FreeGameInitTimes（免费游戏初始次数）
```json
"free_game_init_times": 10
```

**说明**：
- 触发免费游戏后获得的初始免费次数
- 对应const.go中的_baseFreeNumber

### 7. ExtraScatterExtraTime（额外scatter增加次数）
```json
"extra_scatter_extra_time": 2
```

**说明**：免费游戏中每多一个夺宝符号增加的免费次数

### 8. RollCfg（滚轴配置）
```json
"roll_cfg": {
    "base": {
        "use_key": [0],
        "weight": [100]
    },
    "free": {
        "use_key": [1],
        "weight": [100]
    }
}
```

**说明**：
- `base`：基础游戏的滚轴配置
- `free`：免费游戏的滚轴配置
- `use_key`：使用的预设数据索引（对应RealData的第一维索引）
- `weight`：权重（用于多个配置时的随机选择）

### 9. RealData（预设滚轴数据）
```json
"real_data": [
    [  // 索引0：基础游戏数据
        [1,2,3,...],  // 第1列滚轴
        [3,9,5,...],  // 第2列滚轴
        [6,3,3,...],  // 第3列滚轴
        [8,9,3,...],  // 第4列滚轴
        [1,3,3,...]   // 第5列滚轴
    ],
    [  // 索引1：免费游戏数据
        [5,5,3,...],  // 第1列滚轴
        [3,9,5,...],  // 第2列滚轴
        [6,3,3,...],  // 第3列滚轴
        [8,9,3,...],  // 第4列滚轴
        [1,3,3,...]   // 第5列滚轴
    ]
]
```

**说明**：
- 三维数组：[配置类型][列][符号序列]
- 第一维：配置类型（0=基础，1=免费）
- 第二维：5列滚轴
- 第三维：每列的符号序列

**符号编号**：
- 1-4: J, Q, K, A（低价值符号）
- 5-6: 十字架、酒杯（中价值符号）
- 7-9: 小孩、青年女人、老头（高价值符号）
- 10: 百搭符号（wild）
- 11: 夺宝符号（scatter/treasure）

---

## 配置函数

### initGameConfigs()
初始化游戏配置，确保配置只解析一次

### parseGameConfigs()
解析JSON配置数据到结构体

### getSymbolBaseMultiplier(symbol, colCount)
根据符号和匹配数量获取基础倍率

**参数**：
- `symbol`：符号ID（1-10）
- `colCount`：匹配的符号数量（3-5）

**返回**：对应的倍率值

---

## 使用示例

```go
// 初始化配置
s.initGameConfigs()

// 获取符号倍率
multiplier := s.getSymbolBaseMultiplier(7, 4)  // 获取小孩符号4个的倍率：15

// 访问配置
baseBet := s.gameConfig.BaseBat                // 20
triggerCount := s.gameConfig.FreeGameTriggerScatter  // 3
freeCount := s.gameConfig.FreeGameInitTimes    // 10
```

---

*配置完善完成，符合configs_json.go的JSON结构*

