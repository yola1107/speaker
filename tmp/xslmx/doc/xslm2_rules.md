# XSLM2 规则梳理（依据 `doc/doc1.png`、`doc/doc2.png`）

本文档汇总 slot 游戏 XSLM2 的玩法要点，便于后续对照实现和测试。内容按文档原文整理，仅做条理化处理。

---

## 1. 基本信息

- **画布**：3 行 × 4 列 × 4 行 × 3 列（4×5 网格，左右下角为墙格）
- **Ways**：576 路（左起连续列判定）
- **基础模式音乐**：鸳鸯舞三娘（器乐版）
- **免费模式音乐**：同上
- **背景描述**：吸血鬼古堡资源渲染

---

## 2. 符号与定义

| 符号 | 说明 |
| ---- | ---- |
| 1-6  | 普通符号（方块、梅花、红桃、尖头木桩、十字架、斧头） |
| 7-9  | 女性符号 A/B/C，可收集 |
| 10-12 | 女性百搭 A/B/C（分别对应女性 7/8/9） |
| 13   | 野生百搭（吸血鬼王） |
| 14   | 夺宝符号（血月） |
| 99   | 墙格 |

### 女性百搭转化
- 免费模式下，收集到某个女性符号满 10 个时，对应女性符号会转化为女性百搭（例如：收集满 10 个女性 A → 女性 A 将出现为女性百搭 A）。
- 女性百搭不能互相替换；野生百搭可以替换女性百搭。

---

## 3. 普通模式流程

1. 检查是否有女性符号中奖。若无，按普通消除处理。
2. 若女性符号中奖：
   - 如果这局盘面没有夺宝符号，中奖的女性符号和所有百搭都会消除；
   - 如果盘面存在夺宝符号，仅消除中奖女性符号，百搭保留；
   - 消除后同时保留 Wild（规则描述中强调“百搭留在屏幕上”）。
3. 连续清除直到不再有女性符号中奖或无法继续；每次消除后按顺序下落、补位。
4. 若过程中出现 3/4/5 个夺宝符号，对应赠送 7/10/15 个免费次数。

其他说明：
- 高达 100 倍爆奖。
- 夺宝符号触发免费游戏。
- 女性符号满集会化身百搭符号，仍可触发连消。

---

## 4. 免费模式流程

### 免费次数赠送
- 单个夺宝符号即赠送 1 次免费次数（连消结束时统计）。
- 免费局开始时女性收集状态保留。

### 消除规则
1. 消除仅统计女性符号及女性百搭参与的中奖。
2. 若检测到“全屏消除”条件（三种女性分别都已收集 ≥10），进入全屏模式：
   - 有女性百搭的中奖符号全部消除（含女性百搭本体）；
   - 若回合后续补落仍有女性参与中奖，则继续连消；
   - 每个连消回合记录女性收集数量。
3. 普通免费模式：
   - 中奖女性符号及对应女性百搭消除；
   - 野生百搭在免费模式仍可替换女性符号，但是否消除由“有无夺宝”决定（文档写“女性符号消除了，百搭不消”—若有宝箱）；需要结合实际逻辑确认。

### 女性符号收集
- 每次连消后统计中奖网格中真实女性符号（7/8/9），每种最多记 10。
- 当某一女性达到 10 个时，在后续回合中其普通符号转化为对应女性百搭。
- 免费模式中，若三种女性符号都达到 10 个，则进入“全屏消除”状态。

### 免费模式结束条件
- 连续连消直到无女性符号参与中奖或补落后不再有女性中奖为止。
- 每次回合结束时统计夺宝数量并赠送额外次数。
- 免费次数用尽或场景重置时将女性收集状态归零。

---

## 5. 夺宝符号（血月）

- 出现 3/4/5 个 → 普通模式直接赠送 7/10/15 次免费。
- 免费模式下每出现一个即 +1 次。
- 免费游戏开始时，夺宝符号不消失；若后续连消中再次出现，继续计数。

---

## 6. 全屏消除描述

- 条件：三种女性符号各自收集数量 ≥10。
- 效果：屏幕上所有中奖符号都会消除（女性百搭及女性本体），百搭保留与否需结合具体逻辑判断。
- 若消除后补落的新盘面仍有女性中奖，则持续连消。
- 每次连消结束后统计女性收集数量并更新女性百搭状态。

---

## 7. 投注及倍率

- 基础投注：0.02 / 0.10 / 0.50（文档示例）
- 倍数：1-10
- 基础赔付表（3/4/5 连倍率，单位为倍）：

| 符号 | 3连 | 4连 | 5连 |
| ---- | ---- | ---- | ---- |
| 方块 (1) | 5 | 15 | 50 |
| 梅花 (2) | 5 | 15 | 50 |
| 红桃 (3) | 5 | 15 | 50 |
| 尖头木桩 (4) | 10 | 25 | 75 |
| 十字架 (5) | 15 | 45 | 100 |
| 斧头 (6) | 20 | 60 | 150 |
| 女性A (7) | 25 | 80 | 200 |
| 女性B (8) | 25 | 80 | 200 |
| 女性C (9) | 25 | 80 | 200 |
| 女性A百搭 (10) | 30 | 90 | 250 |
| 女性B百搭 (11) | 30 | 90 | 250 |
| 女性C百搭 (12) | 30 | 90 | 250 |

（红色文字在文档中代表关键配置／高价值符号。）

---

## 8. 特殊说明摘录

- “女性符号参与的中奖符号都会消除（无论是否是女性符号）都会消除，有女性百搭参与时，女性百搭会消失但百搭符号不消失，自然下落补齐。”  
- “夺宝符号会留在原地时的屏幕上，有百搭符号不消失。”  
- “出现女性符号 5 个时最多 +10 个夺宝符。”（用于夺宝统计）  
- “女性符号全收集完后，后续倒屏时女性符号都会转化为女性百搭。”  
- 免费模式中，若连消结束时存在女性符号，则继续补落直到女性不再中奖。

---

## 9. 实现要点提示

1. **Ways 判定**：左起连续列，遵循 576 Way 规则。
2. **替换关系**：
   - 野生百搭（13）可替代任意符号（含女性/女性百搭），但在免费模式中是否消除需按夺宝情况处理。
   - 女性百搭只能替代其对应的女性符号，不可替代其他女性/女性百搭。
3. **连线计数**：需要按列构造可替换集合（避免同列多个百搭导致路径指数放大），具体逻辑待按规则重写。
4. **免费模式**：仅女性符号中奖可触发连消。需要在计算 Ways 与消除逻辑时仅保留女性符号及对应百搭。
5. **收集系统**：每次连消后更新 ABC 计数，满 10 转化为百搭；全屏模式下要继续统计。

---

> 注：文档未详细说明女性 Ways 具体计算细节，仅给出规则文本。本梳理为后续实现的参考，具体算法需在实现阶段结合文档描述和业务确认进一步细化。


